#!/bin/sh
#
# ~/.xinitrc
#
# Executed by startx (run your window manager from here)

if [ -d /etc/X11/xinit/xinitrc.d ]; then
  for f in /etc/X11/xinit/xinitrc.d/*; do
    [ -x "$f" ] && . "$f"
  done
  unset f
fi


# ============================================================
# End of /etc/skel/.xinitrc


# Key binds
# ============================================================
$HOME/Dropbox/linux_setup/rcfiles/keybinds.sh



# Run keyring (for ssh-keys etc.)
# ============================================================

# Start a D-Bus session
source /etc/X11/xinit/xinitrc.d/30-dbus
# Start GNOME Keyring
eval $(/usr/bin/gnome-keyring-daemon --start --components=gpg,pkcs11,secrets,ssh)
# You probably need to do this too:
export GNOME_KEYRING_CONTROL GNOME_KEYRING_PID GPG_AGENT_INFO SSH_AUTH_SOCK


# disable the pointing stick
# ============================================================

# if the stick doesn't exist this does nothing
xinput -set-prop "DualPoint Stick" "Device Enabled" 0


# Run things
# ============================================================

# Set desktop background (randomly, including sub folders)
feh --bg-scale $HOME/Dropbox/other/wallpapers -zr

# Start dropbox
dropbox start

# Transparancy for emacs
xcompmgr &

# # Get all the pretty mint settings for MATE
# /usr/bin/mate-settings-daemon &

# Get some nice things from MATE or gnome
gnome-panel || mate-panel || xfce4-panel &

# mate-volume-control-applet &
# mate-keyring-daemon --start --components=gpg &
gnome-screensaver || mate-screensaver  &


# Network manager gui
nm-applet &

# MATE power thingy? No gnome equivalent
mate-power-manager &

# ??
system-config-printer-applet &

# ?? audio?
#start-pulseaudio-x11 &

# Disable access control on the X-server (should be safe, mint uses this
# setting)
xhost +

# and finally run xmonad itself
xmonad
